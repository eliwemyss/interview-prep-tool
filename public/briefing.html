<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interview Briefing</title>
  <script>
    const API_BASE_URL = window.location.hostname === 'localhost' 
      ? 'http://localhost:3000' 
      : window.location.origin;
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .header {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      margin-bottom: 30px;
      text-align: center;
    }

    .header h1 {
      color: #667eea;
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header .company-role {
      font-size: 1.3em;
      color: #666;
      margin-bottom: 15px;
    }

    .header .timestamp {
      font-size: 0.9em;
      color: #999;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s ease;
    }

    .btn:hover {
      background: #764ba2;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #f0f0f0;
      color: #667eea;
    }

    .btn-secondary:hover {
      background: #e0e0e0;
    }

    .section {
      background: white;
      padding: 30px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .section h2 {
      color: #667eea;
      font-size: 1.8em;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 3px solid #667eea;
    }

    .section h3 {
      color: #764ba2;
      font-size: 1.3em;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    .section p {
      line-height: 1.7;
      color: #555;
      margin-bottom: 15px;
    }

    .section ul, .section ol {
      margin-left: 20px;
      margin-bottom: 15px;
    }

    .section li {
      margin-bottom: 10px;
      line-height: 1.6;
      color: #555;
    }

    .highlight {
      background: #fff3cd;
      padding: 15px;
      border-left: 4px solid #ffc107;
      border-radius: 8px;
      margin: 15px 0;
    }

    .danger {
      background: #f8d7da;
      padding: 15px;
      border-left: 4px solid #dc3545;
      border-radius: 8px;
      margin: 15px 0;
    }

    .success {
      background: #d4edda;
      padding: 15px;
      border-left: 4px solid #28a745;
      border-radius: 8px;
      margin: 15px 0;
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .checklist-item input[type="checkbox"] {
      margin-top: 5px;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .checklist-item label {
      cursor: pointer;
      flex: 1;
    }

    .checklist-item input[type="checkbox"]:checked + label {
      text-decoration: line-through;
      color: #999;
    }

    .question-box {
      background: #f8f9fa;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }

    .question-category {
      color: #667eea;
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 0.9em;
      text-transform: uppercase;
    }

    .question-text {
      color: #333;
      line-height: 1.6;
    }

    .footer {
      text-align: center;
      margin-top: 40px;
      padding: 20px;
      color: white;
    }

    .footer a {
      color: #fff;
      text-decoration: none;
      margin: 0 10px;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8em;
      }

      .section {
        padding: 20px;
      }

      .controls {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }
    }

    @media print {
      body {
        background: white;
      }

      .controls, .footer {
        display: none;
      }

      .section {
        page-break-inside: avoid;
        box-shadow: none;
        border: 1px solid #ddd;
      }

      input[type="checkbox"] {
        margin-right: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üéØ Interview Briefing</h1>
      <div class="company-role" id="companyRole">Loading...</div>
      <div class="timestamp" id="timestamp"></div>
      
      <div class="controls">
        <button class="btn" onclick="window.print()">üìÑ Print/PDF</button>
        <button class="btn btn-secondary" onclick="goBack()">‚Üê Back to Research</button>
      </div>
    </div>

    <div id="content"></div>

    <div class="footer">
      <p>Interview Prep Tool | Generated for interview preparation</p>
      <p>
        <a href="/">Research</a> | <a href="/dashboard">Dashboard</a>
      </p>
    </div>
  </div>

  <script>
    let briefingData = null;

    async function loadBriefing() {
      const params = new URLSearchParams(window.location.search);
      const company = params.get('company');
      const role = params.get('role');

      if (!company || !role) {
        document.getElementById('content').innerHTML = `
          <div class="section" style="color: #e74c3c;">
            <h2>Error</h2>
            <p>Please provide company and role parameters: ?company=YourCompany&role=YourRole</p>
            <p><a href="/">‚Üê Go back to research</a></p>
          </div>
        `;
        return;
      }

      document.getElementById('companyRole').textContent = `${role} at ${company}`;
      document.getElementById('timestamp').textContent = new Date().toLocaleString();

      // In a real app, we'd fetch the briefing from the API
      // For now, display a template
      displayBriefingTemplate(company, role);
    }

    function displayBriefingTemplate(company, role) {
      const html = `
        <div class="section">
          <h2>üìä Executive Summary</h2>
          <p>To be generated based on your research data. This will contain a 2-3 sentence overview of the company and its significance in the market.</p>
          <div class="highlight">
            <strong>üí° Tip:</strong> Use this summary to open your interview with context-aware answers. Show you've done your homework!
          </div>
        </div>

        <div class="section">
          <h2>üéØ Key Talking Points</h2>
          <p>Key achievements and facts about ${company} that demonstrate your knowledge:</p>
          <ul>
            <li>Generated talking point 1 with specific metrics</li>
            <li>Generated talking point 2 showing company impact</li>
            <li>Generated talking point 3 about recent growth</li>
            <li>Generated talking point 4 regarding market position</li>
            <li>Generated talking point 5 about innovation</li>
          </ul>
          <div class="success">
            <strong>‚úÖ Remember:</strong> Drop these casually in conversation. Don't just recite facts!
          </div>
        </div>

        <div class="section">
          <h2>üö® Top 3 Company Challenges</h2>
          <p>Understanding what ${company} is working through shows strategic thinking:</p>
          <ol>
            <li><strong>Challenge 1:</strong> Brief description. Why it matters.</li>
            <li><strong>Challenge 2:</strong> Brief description. Potential opportunities.</li>
            <li><strong>Challenge 3:</strong> Brief description. How you might help.</li>
          </ol>
          <div class="highlight">
            <strong>üí° Interview tip:</strong> Mention one relevant challenge and ask how the team is addressing it. Shows you think strategically.
          </div>
        </div>

        <div class="section">
          <h2>üè¢ Culture & Values</h2>
          <p>What it's like to work at ${company} based on employee reviews and company values:</p>
          <ul>
            <li>Culture insight 1 with positive aspect</li>
            <li>Culture insight 2 about values</li>
            <li>Culture insight 3 regarding work environment</li>
            <li>Honest insight about potential challenges</li>
          </ul>
          <div class="highlight">
            <strong>üí° Gut check:</strong> Does this culture resonate with you? Be honest in the interview - fit goes both ways.
          </div>
        </div>

        <div class="section">
          <h2>‚ùì Questions to Ask Interviewers</h2>
          <p>These questions show you're thinking strategically. Organize by round:</p>

          <h3>Team & Growth</h3>
          <div class="question-box">
            <div class="question-category">Growth</div>
            <div class="question-text">Question 1: About team expansion or growth plans</div>
          </div>
          <div class="question-box">
            <div class="question-category">Growth</div>
            <div class="question-text">Question 2: About career progression opportunities</div>
          </div>
          <div class="question-box">
            <div class="question-category">Growth</div>
            <div class="question-text">Question 3: About learning and development</div>
          </div>

          <h3>Role & Impact</h3>
          <div class="question-box">
            <div class="question-category">Impact</div>
            <div class="question-text">Question 4: About success metrics for the role</div>
          </div>
          <div class="question-box">
            <div class="question-category">Impact</div>
            <div class="question-text">Question 5: About key projects and ownership</div>
          </div>
          <div class="question-box">
            <div class="question-category">Impact</div>
            <div class="question-text">Question 6: About team collaboration</div>
          </div>

          <h3>Culture & Values</h3>
          <div class="question-box">
            <div class="question-category">Culture</div>
            <div class="question-text">Question 7: About what makes someone successful here</div>
          </div>
          <div class="question-box">
            <div class="question-category">Culture</div>
            <div class="question-text">Question 8: About work-life balance</div>
          </div>
          <div class="question-box">
            <div class="question-category">Culture</div>
            <div class="question-text">Question 9: About team dynamics</div>
          </div>

          <h3>Technical & Product</h3>
          <div class="question-box">
            <div class="question-category">Technical</div>
            <div class="question-text">Question 10: About tech stack and architecture</div>
          </div>
          <div class="question-box">
            <div class="question-category">Technical</div>
            <div class="question-text">Question 11: About roadmap and upcoming priorities</div>
          </div>
          <div class="question-box">
            <div class="question-category">Technical</div>
            <div class="question-text">Question 12: About biggest technical challenges</div>
          </div>

          <div class="success">
            <strong>‚úÖ Pro tip:</strong> Ask 2-3 questions max per interview. Quality > quantity. Let answers inform follow-ups.
          </div>
        </div>

        <div class="section">
          <h2>üí∞ Salary & Compensation</h2>
          <p>Based on market research for a ${role} at ${company}:</p>
          <div class="highlight">
            <p><strong>Typical Salary Range:</strong> Research-based range will appear here</p>
            <p><strong>Equity/Stock:</strong> Typical equity structure for this stage</p>
            <p><strong>Benefits:</strong> Common benefits packages</p>
          </div>
          <div class="success">
            <strong>üí° Negotiation tips:</strong>
            <ul style="margin-top: 10px;">
              <li>Don't discuss salary until offer stage</li>
              <li>Research comparable roles beforehand</li>
              <li>Consider total compensation (equity + salary + benefits)</li>
              <li>Be prepared to justify your ask with market data</li>
            </ul>
          </div>
        </div>

        <div class="section">
          <h2>‚ö†Ô∏è Potential Red Flags</h2>
          <p>Be aware of these considerations based on company research:</p>
          <div class="danger">
            <ul>
              <li>Potential challenge 1 with context</li>
              <li>Consideration 2 to discuss with team</li>
              <li>Thing to clarify with hiring manager</li>
            </ul>
            <p style="margin-top: 10px;"><strong>Remember:</strong> These aren't deal-breakers necessarily. Just things to understand fully. Ask follow-up questions respectfully.</p>
          </div>
        </div>

        <div class="section">
          <h2>‚úÖ Pre-Interview Checklist</h2>
          <p><strong>2 Weeks Before:</strong></p>
          <div class="checklist-item">
            <input type="checkbox" id="c1">
            <label for="c1">Review this briefing thoroughly</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c2">
            <label for="c2">Study the company's tech stack and recent releases</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c3">
            <label for="c3">Practice 10-15 relevant interview problems</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c4">
            <label for="c4">Prepare 5 behavioral stories (STAR method)</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c5">
            <label for="c5">Research interviewer backgrounds on LinkedIn</label>
          </div>

          <p style="margin-top: 30px;"><strong>1 Day Before:</strong></p>
          <div class="checklist-item">
            <input type="checkbox" id="c6">
            <label for="c6">Get 8 hours of sleep</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c7">
            <label for="c7">Review this briefing one more time</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c8">
            <label for="c8">Prepare your questions (print or digital)</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c9">
            <label for="c9">Test your setup (camera, mic, internet)</label>
          </div>

          <p style="margin-top: 30px;"><strong>Interview Day:</strong></p>
          <div class="checklist-item">
            <input type="checkbox" id="c10">
            <label for="c10">Eat a good meal (no sugar crashes!)</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c11">
            <label for="c11">Dress professionally</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c12">
            <label for="c12">Have your resume and briefing nearby</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c13">
            <label for="c13">Test your setup 30 mins before</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="c14">
            <label for="c14">Take deep breaths and remember: they want you to succeed!</label>
          </div>
        </div>

        <div class="section">
          <h2>üéØ Final Tips</h2>
          <ul>
            <li><strong>Be authentic:</strong> Use this briefing to be informed, not to pretend. Genuine enthusiasm beats memorized facts.</li>
            <li><strong>Listen actively:</strong> The best interviews are conversations, not interrogations. Ask follow-up questions.</li>
            <li><strong>Show curiosity:</strong> Ask about challenges, strategy, and the team. This demonstrates real interest.</li>
            <li><strong>Use metrics:</strong> When talking about your achievements, use numbers. "Improved performance by 40%" beats "made it better."</li>
            <li><strong>Tell stories:</strong> Use the STAR method for behavioral questions. Structure ‚Üí Situation, Task, Action, Result.</li>
            <li><strong>Ask for feedback:</strong> At the end, ask "Is there anything from my background you'd like to dive deeper on?"</li>
          </ul>
        </div>
      `;

      document.getElementById('content').innerHTML = html;

      // Add event listeners to checkboxes to persist state
      document.querySelectorAll('.checklist-item input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
          localStorage.setItem('checklist_' + checkbox.id, checkbox.checked);
        });
        // Restore checked state
        const saved = localStorage.getItem('checklist_' + checkbox.id);
        if (saved === 'true') {
          checkbox.checked = true;
        }
      });
    }

    function goBack() {
      window.history.back();
    }

    // Load on page load
    loadBriefing();
  </script>
</body>
</html>
